<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Manager.GUI.ViewModels"
             x:Class="Manager.GUI.Views.SettingsView"
             x:DataType="vm:SettingsViewModel">

    <ScrollViewer>
        <StackPanel Spacing="20" Margin="20">
            <TextBlock Text="Settings" FontSize="24" FontWeight="Bold" />

            <Border BorderBrush="#333" BorderThickness="1" CornerRadius="5" Padding="15">
                <StackPanel Spacing="10">
                    <TextBlock Text="Appearance" FontSize="18" FontWeight="SemiBold" />
                    
                    <Grid ColumnDefinitions="150, *">
                        <TextBlock Grid.Column="0" Text="Application Theme" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" ItemsSource="{Binding AppThemes}" 
                                  SelectedItem="{Binding SelectedAppTheme}" Width="200" HorizontalAlignment="Left"/>
                    </Grid>
                </StackPanel>
            </Border>

            <Border BorderBrush="#333" BorderThickness="1" CornerRadius="5" Padding="15">
                <StackPanel Spacing="15">
                    <TextBlock Text="Code Editor" FontSize="18" FontWeight="SemiBold" />

                    <Grid RowDefinitions="Auto, Auto, Auto" ColumnDefinitions="150, *">
                        
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Editor Theme" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="0" Grid.Column="1" ItemsSource="{Binding EditorThemes}" 
                                  SelectedItem="{Binding SelectedEditorTheme}" Width="200" HorizontalAlignment="Left"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Font Family" VerticalAlignment="Center" Margin="0,10"/>
                        <ComboBox Grid.Row="1" Grid.Column="1" ItemsSource="{Binding InstalledFonts}" 
                                  SelectedItem="{Binding SelectedFont}" Width="250" HorizontalAlignment="Left" Margin="0,10"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Font Size" VerticalAlignment="Center"/>
                        <NumericUpDown Grid.Row="2" Grid.Column="1" Value="{Binding FontSize}" 
                                       Minimum="8" Maximum="72" Increment="1" Width="100" HorizontalAlignment="Left"/>
                    </Grid>
                    
                    <Border Background="{DynamicResource TextControlBackground}" Padding="10" CornerRadius="3" Margin="0,10,0,0">
                        <TextBlock Text="Preview Text: 127.0.0.1  localhost # Example" 
                                   FontFamily="{Binding SelectedFont}" 
                                   FontSize="{Binding FontSize}" />
                    </Border>
                </StackPanel>
            </Border>
            <Border BorderBrush="#333" BorderThickness="1" CornerRadius="5" Padding="15">
                <StackPanel Spacing="15">
                    <TextBlock Text="Artificial Intelligence" FontSize="18" FontWeight="SemiBold" />
                    
                    <Grid RowDefinitions="Auto, Auto, Auto" ColumnDefinitions="150, *">
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Provider" VerticalAlignment="Center"/>
                        <ComboBox Grid.Row="0" Grid.Column="1" ItemsSource="{Binding AiProviders}" 
                                  SelectedItem="{Binding SelectedAiProvider}" Width="200" HorizontalAlignment="Left"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="API Key" VerticalAlignment="Center" Margin="0,10"/>
                        <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding AiApiKey}" 
                                 PasswordChar="*" Width="400" HorizontalAlignment="Left" Margin="0,10"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Model Name" VerticalAlignment="Center"/>
                        <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding AiModel}" 
                                 Watermark="e.g. gemini-1.5-flash" Width="200" HorizontalAlignment="Left"/>
                    </Grid>
                    
                    <TextBlock Text="Note: API Keys are stored locally." FontSize="11" Foreground="Gray"/>
                </StackPanel>
            </Border>
            
            <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Right">
                <Button Content="Save Settings" Command="{Binding SaveSettingsCommand}" 
                        Background="#27ae60" Foreground="White" Padding="15,10"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>